@using Microsoft.AspNet.Identity
@using ReadingClub.Web.ViewModels.Discussions
@model DetailDiscussionViewModel

<div>
    @if (Model.Users.Any(x => x.Id == User.Identity.GetUserId()))
    {
        @Ajax.ActionLink("Leave", "Leave", "Discussions", new { id = Model.Id },
          new AjaxOptions()
          {
              HttpMethod = "POST",
              UpdateTargetId = "discussion-buttons",
              InsertionMode = InsertionMode.Replace
          }, new { @class = "btn btn-danger", @role = "button" })
    }
    else if (User.Identity.IsAuthenticated && Model.Users.Count() < Model.MaximumNumberOfParticipants)
    {
        @Ajax.ActionLink("Join", "Join", "Discussions", new { id = Model.Id },
          new AjaxOptions()
          {
              HttpMethod = "POST",
              UpdateTargetId = "discussion-buttons",
              InsertionMode = InsertionMode.Replace
          }, new { @class = "btn btn-success", @role = "button" });
    }
</div>
