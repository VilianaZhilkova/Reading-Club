@using GridMvc.Html
@using ReadingClub.Web.Areas.Administration.ViewModels.Books
@model IEnumerable<AdminBookViewModel>

@if (Request.IsAuthenticated && User.IsInRole("Admin"))
{
    @Html.Grid(Model).Columns(columns =>
{
    columns.Add(d => d.Id).Titled("Id").SetWidth(10).Sortable(true).Filterable(true).Css("grid-colums");
    columns.Add(d => d.Title).Titled("Title").Sortable(true).Filterable(true).Css("grid-colums");

    columns.Add(d => d.Author).Titled("Author").Sortable(true).Filterable(true).Css("grid-colums");
    columns.Add(d => d.Description).Titled("Description").Filterable(true).Sortable(true).Css("grid-colums");
    columns.Add(d => d.NumberOfDiscussions).Titled("Discussions Count").Sortable(true).Filterable(true).Css("grid-colums");

    columns.Add(d => d.IsApproved).Titled("Disapprove")
    .Sanitized(false)
    .Encoded(false)
    .SetWidth(200)
    .RenderValueAs(x => @Html.ActionLink("Disapprove", "DisapproveBook", "Books", new { bookId = x.Id }, new { onclick = "return confirm('Are you sure you want to disapprove this book?');", @class = "btn btn-danger", @role = "button" }))
    .Css("grid-colums");

    columns.Add(d => d.IsDeleted).Titled("Delete")
    .SetWidth(200)
    .Sanitized(false)
    .Encoded(false)
    .RenderValueAs(x => @Html.ActionLink("Delete", "DeleteBook", "Books", new { bookId = x.Id }, new { onclick = "return confirm('Are you sure you want to delete this book?');", @class = "btn btn-danger", @role = "button" }))
    .Css("grid-colums");
}).WithPaging(4)
}
